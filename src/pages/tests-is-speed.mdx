---
slug: "/blog/tests-is-speed"
date: "2021-08-13"
author: "Евгений"
---
# Тесты нужны для скорости

<!-- cut -->
Я постоянно слышу о том что, что бы писать тесты нужно увеличить оценку по времени задачи в 1.2, 1.5, 2, 3 раза.
Обычно я не спорю с этим, так как команде виднее, но внутри меня частенько бурлит, или как минимум подбурливает.
Хотел бы объяснить свой взгляд на автоматические тесты, и почему считаю что такое увеличение не совсем корректное.
<!-- cut -->

## Как мы обычно разрабатываем

В данном разделе я имею в виду сценарии, при которых нам хотя бы немного важно качество.
И так, у нас есть какой-то проект, предположим это API. Предположим нам надо расширить тот самый API.
Так или иначе нам нужно проверить результат, что API отрабатывает как надо.
Для этого мы после каждого изменения стартуем процесс с API. Заходим в какой-то swagger или postman, делаем запрос с нужными данными и смотрим результат.

_Таааак... тут у нас упало... Ага понял где упало, правим. Завелось. Делаем дальнейшую правку... тааааккк опять упало. Не понятно где.
Пойду ка я в деббагер. Дебаггер покликали, ага стало понятно, делаем правку
...иии... опять надо пойти пнуть API что бы проверить что правка валидная._

Как минимум тут уже несколько переключений контекста. Хорошо если нужно открывать postman, а если браузер.
Там же нотификации, и хоба почитать почту надо, а тут хоба колокольчик на ютубе.

А если нужна тяжелая подготовка данных, для которых например надо вызывать еще других API или по добавлять строк в базу данных.

Еще ситуация усугубляется, когда мы работаем с фронтендом в браузере.
Там ведь целый дивный мир, если мы не пишем стартовые страницы, то нужно пробираться сквозь дебри интерфейса,
как минимум проходить авторизацию, как максимум целые пользовательские сценарии из кучи шагов.

## Какая есть альтернатива

Как понятно из заголовка статьи - это тесты.
Имея хорошо настроенное окружение и процесс (об этом ниже), можно отлично войти в поток и просто фигачить качественный код до помутнения сознания.
Никаких переключений контекста, никаких нажатий мышкой.
Отвлекаемся на мессенджеры, почту, соцсети, и т.д. только как сами посчитаем нужным это сделать.

Основа этому - это *постоянная обратная связь от тестов*. Не нужно переключать контекст, что бы понять мой код работает или нет.

И вообще, прикиньте с тестами можно писать код не будучи подключенным к интернету (если не считать отсутствие stackoverflow за блокер).
Реально, я как то написал нужный кусок функционала для интеграции с командой заказчика, будучи в пути к заказчику без интернета.
Когда я добрался до рабочего места, я запустил и всё просто работало. До этого я 6 часов просто писал код.

Конечно не все тесты работают на продуктивность. Все мы знаем про пирамиду тестирования.
Так вот чем выше по пирамиде мы карабкаемся, тем меньше вклад тестов в продуктивность разработки и больше в другие характеристики.
То-есть да, **unit тесты**, которые многие критикуют, как раз **дают наибольший прирост к продуктивности.**

На самом деле прогресс шагнул и интеграционные тесты, в этом плане тоже не плохи, в текущее время.
Но есть конечно, но. Нужно помнить что на настройку интеграционных тестов нужно будет потратить немного больше времени.
Их нельзя просто сесть и писать. В большинстве своем надо стартануть какой-то процесс и может быть пару зависимостей в докере поднять.
Но в целом, когда этот этап пройден, написание интеграционных тестов тоже очень и очень помогает ускориться.

## Несколько простых правил для разработки и окружения, что бы скорость действительно была скоростью

### 1. Научитесь пользоваться IDE, и желательно без мыши

Я в основном использую IDE от JetBrains (Project Rider, IntelliJ IDEA, WebStorm).
Один из интересных приемов, которые я применяю в этих IDE - это генерация кода из тестов.
То есть, вместо того что бы накидывать какой-то дизайн в коде и потом писать на него тесты, я прямо начинаю писать тест.
Хороший старт, это тест _"Как я хочу использовать, то что мне нужно сделать"_.
Прямо в тесте начинаем использовать, то чего еще нет.
Далее идёт магия IDE, которую хорошо бы выучить и довезти до автоматизма.
IDE подсвечивает что, то что я использую в тесте, еще не существует. Так как использование мне уже нравиться, я просто жму ALT+ENTER
и вуа-ля мне предлагает создать разные примитивы в языке, класс, интерфейс, функцию, компонент и тд.


И я не отказываюсь от предложения IDE :)

С радостью соглашаемся на ее предложения. После этого *прямо в тестах* получаем что-то, что уже может вызываться.
Далее повторяем шаги с разными другими тестами. Когда результат уже выглядит как что-то большое,
например мы нагенерили несколько классов или что-то законченное,
например уже есть вполне себе функциональность,
можно перенести код в те места где он должен обитать. Нажимаем CTRL+SHIFT+O (команда перенести в файл, у вас могут быть другие комбинации), выбираем куда и всё, дальше IDE сама.

Это всё к тому что пользование IDE сильно упрощает и написание тестов и написание кода, а также влияет на скорость, как минимум не нужно будет брать в руки мышь и искать нужное место в интерфейсе что бы что-то нажать.

### 2. Настройте тесты так что бы их было легко запускать или перезапускать


